import{r as t,c as e,h as i,H as r,g as n}from"./p-05c16b94.js";import{c as o,g as s,a as h}from"./p-37417714.js";import{r as c}from"./p-1c82637e.js";const a=s(o((function(t){t.exports=function t(e,i,r){function n(s,c){if(!i[s]){if(!e[s]){var a="function"==typeof h&&h;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,(function(t){return n(e[s][1][t]||t)}),u,u.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof h&&h,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o={width:"100%",height:"100%"},s=function(t){return Number(t)==Number(t)},h="classList"in document.documentElement?function(t,e){t.classList.add(e)}:function(t,e){var i=t.getAttribute("class")||"";t.setAttribute("class",i+" "+e)},c=function(){function t(e,i){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._config={},this._lastRepaint=null,this._maxElementHeight=t.getMaxBrowserHeight(),this.refresh(e,i);var n=this._config;!function t(){var e=r._getScrollPosition(),i=r._lastRepaint;if(r._renderAnimationFrame=window.requestAnimationFrame(t),e!==i){var o=i?e-i:0;if(!i||o<0||o>r._averageHeight){var s=r._renderChunk();r._lastRepaint=e,!1!==s&&"function"==typeof n.afterRender&&n.afterRender()}}}()}return r(t,null,[{key:"create",value:function(e,i){return new t(e,i)}},{key:"mergeStyle",value:function(t,e){for(var i in e)t.style[i]!==e[i]&&(t.style[i]=e[i])}},{key:"getMaxBrowserHeight",value:function(){var e=document.createElement("div"),i=document.createElement("div");t.mergeStyle(e,{position:"absolute",height:"1px",opacity:0}),t.mergeStyle(i,{height:"1e7px"}),e.appendChild(i),document.body.appendChild(e);var r=i.offsetHeight;return document.body.removeChild(e),r}}]),r(t,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(e,i){var r;if(Object.assign(this._config,o,i),!e||1!==e.nodeType)throw new Error("HyperList requires a valid DOM Node container");this._element=e;var h=this._config,c=this._scroller||h.scroller||document.createElement(h.scrollerTagName||"tr");if("boolean"!=typeof h.useFragment&&(this._config.useFragment=!0),!h.generate)throw new Error("Missing required `generate` function");if(!s(h.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(h.itemHeight)&&!s(h.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());this._itemHeights=s(h.itemHeight)?Array(h.total).fill(h.itemHeight):h.itemHeight,Object.keys(o).filter((function(t){return t in h})).forEach((function(t){var e=h[t],i=s(e);if(e&&"string"!=typeof e&&"number"!=typeof e)throw new Error("Invalid optional `"+t+"`, expected string or number");i&&(h[t]=e+"px")}));var a=Boolean(h.horizontal),l=h[a?"width":"height"];if(l){var u=s(l),d=!u&&"%"===l.slice(-1),v=u?l:parseInt(l.replace(/px|%/,""),10),f=window[a?"innerWidth":"innerHeight"];this._containerSize=d?f*v/100:s(l)?l:v}var m=h.scrollContainer,g=h.itemHeight*h.total,p=this._maxElementHeight;g>p&&console.warn(["HyperList: The maximum element height",p+"px has","been exceeded; please reduce your item height."].join(" ")),t.mergeStyle(e,{width:""+h.width,height:m?g+"px":""+h.height,overflow:m?"none":"auto",position:"relative"}),m&&t.mergeStyle(h.scrollContainer,{overflow:"auto"});var b=(n(r={opacity:"0",position:"absolute"},a?"height":"width","1px"),n(r,a?"width":"height",g+"px"),r);t.mergeStyle(c,b),this._scroller||e.appendChild(c);var x=this._computeScrollPadding();this._scrollPaddingBottom=x.bottom,this._scrollPaddingTop=x.top,this._scroller=c,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(h.total).fill(0),this._computePositions(0),this._renderChunk(null!==this._lastRepaint),"function"==typeof h.afterRender&&h.afterRender()}},{key:"_getRow",value:function(e){var i=this._config,r=i.generate(e),o=r.height;if(void 0!==o&&s(o)?(r=r.element,o!==this._itemHeights[e]&&(this._itemHeights[e]=o,this._computePositions(e),this._scrollHeight=this._computeScrollHeight(e))):o=this._itemHeights[e],!r||1!==r.nodeType)throw new Error("Generator did not return a DOM Node for index: "+e);return h(r,i.rowClassName||"vrow"),t.mergeStyle(r,n({position:"absolute"},i.horizontal?"left":"top",this._itemPositions[e]+this._scrollPaddingTop+"px")),r}},{key:"_getScrollPosition",value:function(){var t=this._config;return"function"==typeof t.overrideScrollPosition?t.overrideScrollPosition():this._element[t.horizontal?"scrollLeft":"scrollTop"]}},{key:"_renderChunk",value:function(t){var e=this._config,i=this._element,r=this._getScrollPosition(),n=e.total,o=e.reverse?this._getReverseFrom(r):this._getFrom(r)-1;if((o<0||o-this._screenItemsLen<0)&&(o=0),!t&&this._lastFrom===o)return!1;this._lastFrom=o;var s=o+this._cachedItemsLen;(s>n||s+this._cachedItemsLen>n)&&(s=n);var h=e.useFragment?document.createDocumentFragment():[];h[e.useFragment?"appendChild":"push"](this._scroller);for(var c=o;c<s;c++){var a=this._getRow(c);h[e.useFragment?"appendChild":"push"](a)}if(e.applyPatch)return e.applyPatch(i,h);i.innerHTML="",i.appendChild(h)}},{key:"_computePositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this._config,i=e.total,r=e.reverse;t<1&&!r&&(t=1);for(var n=t;n<i;n++)r?0===n?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[n]=this._itemPositions[n-1]-this._itemHeights[n]:this._itemPositions[n]=this._itemHeights[n-1]+this._itemPositions[n-1]}},{key:"_computeScrollHeight",value:function(){var e,i=this,r=this._config,o=Boolean(r.horizontal),s=r.total,h=this._itemHeights.reduce((function(t,e){return t+e}),0)+this._scrollPaddingBottom+this._scrollPaddingTop;t.mergeStyle(this._scroller,(n(e={opacity:0,position:"absolute",top:"0px"},o?"height":"width","1px"),n(e,o?"width":"height",h+"px"),e));var c=this._itemHeights.slice(0).sort((function(t,e){return t-e})),a=Math.floor(s/2),l=s%2==0?(c[a]+c[a-1])/2:c[a],u=o?"clientWidth":"clientHeight",d=r.scrollContainer?r.scrollContainer:this._element,v=d[u]?d[u]:this._containerSize;return this._screenItemsLen=Math.ceil(v/l),this._containerSize=v,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,3*this._screenItemsLen),this._averageHeight=l,r.reverse&&window.requestAnimationFrame((function(){o?i._element.scrollLeft=h:i._element.scrollTop=h})),h}},{key:"_computeScrollPadding",value:function(){var t=this._config,e=Boolean(t.horizontal),i=t.reverse,r=window.getComputedStyle(this._element),n=function(t){var e=r.getPropertyValue("padding-"+t);return parseInt(e,10)||0};return e&&i?{bottom:n("left"),top:n("right")}:e?{bottom:n("right"),top:n("left")}:i?{bottom:n("top"),top:n("bottom")}:{bottom:n("bottom"),top:n("top")}}},{key:"_getFrom",value:function(t){for(var e=0;this._itemPositions[e]<t;)e++;return e}},{key:"_getReverseFrom",value:function(t){for(var e=this._config.total-1;e>0&&this._itemPositions[e]<t+this._containerSize;)e--;return e}}]),t}();i.default=c,e.exports=i.default},{}]},{},[1])(1)}))),l=class{constructor(i){t(this,i),this.contextChange=e(this,"contextChange",7),this.nodeRemoved=e(this,"nodeRemoved",7),this.toggleListener=new Map,this.itemClickListener=new Map,this.updates=new Map,this.root=void 0,this.model=void 0,this.renderItem=void 0,this.context={}}getVirtualizerOptions(){const t=this.buildTreeList(this.model[this.root]);return{itemHeight:32,total:t.length,generate:e=>{const i=t[e],r=this.host.querySelector(`[data-tree-node-id="${i.id}"]`),n=this.getContext(i.id);if(r)return r.hasChildren=i.hasChildren,r.context=Object.assign({},n),this.updates.has(i.id)&&this.updates.get(i.id)(i,Object.assign({},this.context)),r;const o=t=>{this.updates.set(i.id,t)};let s=null;this.renderItem&&(s=this.renderItem(e,i,t,Object.assign({},this.context),o)),null===s&&(s=c(i,n,o));const h=s;if(h.setAttribute("data-tree-node-id",i.id),h.style.paddingLeft=i.level+"rem",h.style.paddingRight="1rem",!this.itemClickListener.has(h)){const t=t=>{t.preventDefault(),t.stopPropagation(),Object.values(this.context).forEach((t=>t.isSelected=!1));const e=this.getContext(i.id);e.isSelected=!0,this.setContext(i.id,e)};h.addEventListener("itemClick",t),this.itemClickListener.set(h,t)}if(i.hasChildren&&!this.toggleListener.has(h)){const r=r=>{r.preventDefault(),r.stopPropagation();const n=this.getContext(t[e].id);n.isExpanded=!n.isExpanded,this.setContext(i.id,n)};h.addEventListener("toggle",r),this.toggleListener.set(h,r)}return h}}}setContext(t,e){this.context=Object.assign(Object.assign({},this.context),{[t]:e}),this.contextChange.emit(this.context)}getContext(t){return this.context?(this.context[t]||(this.context[t]={isExpanded:!1,isSelected:!1}),this.context[t]):{isExpanded:!1,isSelected:!1}}buildTreeList(t,e=0){const i=[];if(null==t?void 0:t.hasChildren){const r=e+1;t.children.forEach((t=>{const n=this.model[t],o=this.getContext(t);i.push(Object.assign(Object.assign({},n),{level:e})),n.hasChildren&&o.isExpanded&&i.push(...this.buildTreeList(n,r))}))}return i}componentDidLoad(){this.initList(),this.observer=new MutationObserver((t=>{let e=[];t.forEach((t=>{e=[...e,...Array.from(t.removedNodes)],t.addedNodes.forEach((t=>{const i=e.indexOf(t);i>=0&&e.splice(i,1)}))})),this.nodeRemoved.emit(e)})),this.observer.observe(this.host,{childList:!0})}componentWillRender(){this.isListInitialized()?this.refreshList():this.initList()}disconnectedCallback(){this.hyperlist.destroy(),this.observer.disconnect()}modelChange(){this.isListInitialized()||this.initList()}isListInitialized(){var t;const e=null===(t=this.hyperlist)||void 0===t?void 0:t._itemPositions;return void 0!==e&&e.length&&!(null==e?void 0:e.some((t=>void 0===t||Number.isNaN(t))))}refreshList(){this.hyperlist&&this.hyperlist.refresh(this.host,this.getVirtualizerOptions())}initList(){var t;null===(t=this.hyperlist)||void 0===t||t.destroy();const e=this.getVirtualizerOptions();this.hyperlist=new a(this.host,e)}render(){return i(r,null,i("slot",null))}get host(){return n(this)}static get watchers(){return{model:["modelChange"]}}};l.style=".sc-ix-tree-h{display:block}";const u=class{constructor(i){t(this,i),this.toggle=e(this,"toggle",7),this.itemClick=e(this,"itemClick",7),this.text=void 0,this.hasChildren=void 0,this.context=void 0}render(){var t,e,n;return i(r,{class:{selected:null===(t=this.context)||void 0===t?void 0:t.isSelected}},i("div",{class:"icon-toggle-container",onClick:t=>{t.preventDefault(),this.toggle.emit()}},this.hasChildren?i("ix-icon",{name:"chevron-right",size:"16",class:{"icon-toggle-down":null===(e=this.context)||void 0===e?void 0:e.isExpanded},color:"color-"+((null===(n=this.context)||void 0===n?void 0:n.isExpanded)?"primary":"std-text")}):null),i("div",{class:"tree-node-container",onClick:t=>{t.preventDefault(),this.itemClick.emit()}},this.text,i("slot",null)))}};u.style=".sc-ix-tree-item-h{display:flex;align-items:center;height:32px;width:100%;cursor:pointer}.sc-ix-tree-item-h:not(.disabled):not(:disabled):not(.selected).hover,.sc-ix-tree-item-h:not(.disabled):not(:disabled):not(.selected):hover{background-color:var(--theme-tree-item--background--hover)}.sc-ix-tree-item-h:not(.disabled):not(:disabled):not(.selected).active,.sc-ix-tree-item-h:not(.disabled):not(:disabled):not(.selected):active{background-color:var(--theme-tree-item--background--active)}.selected.sc-ix-tree-item-h{background-color:var(--theme-tree-item--background--selected)}.selected.hover.sc-ix-tree-item-h,.selected.sc-ix-tree-item-h:hover{background-color:var(--theme-tree-item--background--selected-hover)}.selected.active.sc-ix-tree-item-h,.selected.sc-ix-tree-item-h:active{background-color:var(--theme-tree-item--background--selected-active)}.sc-ix-tree-item-h .tree-node-container.sc-ix-tree-item{display:flex;align-items:center;height:2rem;flex-grow:1;align-items:center}.sc-ix-tree-item-h .icon-toggle-container.sc-ix-tree-item{display:flex;align-items:center;justify-content:center;width:2rem;height:2rem}.sc-ix-tree-item-h .icon-toggle-container.sc-ix-tree-item ix-icon.sc-ix-tree-item{transition:transform 150ms ease-in-out}.sc-ix-tree-item-h .icon-toggle-container.sc-ix-tree-item ix-icon.icon-toggle-down.sc-ix-tree-item{transform:rotate(90deg)}";export{l as ix_tree,u as ix_tree_item}