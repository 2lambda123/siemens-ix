/*
 * SPDX-FileCopyrightText: 2023 Siemens AG
 *
 * SPDX-License-Identifier: MIT
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@import 'common-variables';
@import 'mixins/hover';
@import 'mixins/fonts';
@import 'mixins/text-truncation';
@import 'mixins/shadow-dom/component';

$focus-bdr-width: 0.0625rem;

@mixin crumb-hover($variant) {
  @include hover {
    background-color: var(--theme-breadcrumb-#{$variant}--background--hover);

    .crumb-text,
    .glyph {
      color: var(--theme-breadcrumb-#{$variant}--color--hover);
    }

    .crumb-text + .glyph-chevron-right-small {
      color: var(--theme-breadcrumb-#{$variant}-arrow--color--hover);
    }
  }

  @include active {
    background-color: var(--theme-breadcrumb-#{$variant}--background--active);

    .crumb-text,
    .glyph {
      color: var(--theme-breadcrumb-#{$variant}--color--active);
    }

    .crumb-text + .glyph-chevron-right-small {
      color: var(--theme-breadcrumb-#{$variant}-arrow--color--active);
    }
  }
}

@mixin breadcrumb($variant) {
  .crumb.#{$variant} {
    background-color: var(--theme-breadcrumb-#{$variant}--background);
    border: $focus-bdr-width solid transparent;
    transition: $default-time;

    .crumb-text,
    .glyph {
      color: var(--theme-breadcrumb-#{$variant}--color);
    }

    .crumb-text + .glyph-chevron-right-small {
      color: var(--theme-breadcrumb-#{$variant}-arrow--color);
    }

    &.last .crumb-text {
      color: var(--theme-breadcrumb-#{$variant}-last--color);
    }

    &:not(.remove-hover) {
      @include crumb-hover($variant);
    }
  }
}

:host {
  @include ix-component;

  display: flex;
  height: $large-control-height;
  justify-content: flex-start;
  align-items: center;
  background-color: transparent;
  overflow: hidden;

  nav.breadcrumb {
    all: unset;
  }

  nav.breadcrumb ol {
    all: unset;
    list-style: none;
    display: flex;
  }

  nav.breadcrumb li {
    all: unset;
    display: inline-block;
  }

  .crumb {
    position: relative;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    white-space: nowrap;
    border-radius: var(--theme-breadcrumb--border-radius);
    height: $default-control-height;
    max-height: $default-control-height;
    min-width: 0;
    margin-inline-end: $tiny-space;
    padding: calc($small-space - $focus-bdr-width) 0
      calc($small-space - $focus-bdr-width) calc($tiny-space - $focus-bdr-width);
    outline: none;
    cursor: pointer;

    .crumb-text {
      @include ellipsis;
      display: flex;
      align-items: center;
      min-width: 0;
      font-weight: $font-weight-bold;

      ix-icon {
        margin-inline-end: $tiny-space;
        vertical-align: text-bottom;
      }

      ix-typography {
        min-width: 0;

        div {
          @include ellipsis;
        }
      }
    }

    .crumb-text + ix-icon {
      margin-inline-start: $small-space;
      margin-inline-end: calc($focus-bdr-width * -1);
    }

    &.last {
      background-color: transparent !important;
      cursor: default;
      padding-inline-end: $tiny-space;
    }

    &:not(.remove-hover) {
      @include focus-visible {
        border-color: var(--theme-color-focus-bdr);
      }
    }

    &:not(.last) {
      flex-shrink: 0;
      max-width: 14rem;
    }
  }

  .remove-anchor::after {
    display: none;
  }

  @include breadcrumb('btn');
  @include breadcrumb('ghost');
}
