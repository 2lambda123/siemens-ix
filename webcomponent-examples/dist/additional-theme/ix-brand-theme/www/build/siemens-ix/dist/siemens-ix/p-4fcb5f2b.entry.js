import{r as t,c as e,h as i,H as s,g as c}from"./p-05c16b94.js";const l=class{constructor(i){t(this,i),this.itemSelectionChange=e(this,"itemSelectionChange",7),this.addItem=e(this,"addItem",7),this.selectedIndices=[],this.allowClear=!1,this.mode="single",this.editable=!1,this.disabled=!1,this.readonly=!1,this.i18nPlaceholder="Select an option",this.i18nPlaceholderEditable="Type of select option",this.i18nSelectListHeader="Please select an option",this.dropdownShow=!1,this.value=void 0,this.dropdownWrapperRef=void 0,this.dropdownAnchor=void 0,this.isDropdownEmpty=!1,this.hasFocus=!1,this.navigationItem=void 0,this.inputFilterText=void 0,this.inputValue=void 0}get items(){return Array.from(this.hostElement.querySelectorAll("ix-select-item"))}get selectedItems(){return this.items.filter((t=>t.selected))}get addItemButton(){return this.hostElement.querySelector(".add-item")}get isSingleMode(){return"single"===this.mode}get isMultipleMode(){return"multiple"===this.mode}watchSelectedIndices(t){t?Array.isArray(t)?this.selectValue([...t]):this.selectValue([t]):this.selectValue([])}onItemClicked(t){this.emitItemClick(t.detail)}watchInputText(t){this.editable&&this.itemExists(t)}emitItemClick(t){this.selectedIndices=this.isMultipleMode&&Array.isArray(this.selectedIndices)?this.selectedIndices.includes(t)?this.selectedIndices.filter((e=>e!==t)):[...this.selectedIndices,t]:[t],this.selectValue(this.selectedIndices),this.itemSelectionChange.emit(this.selectedIndices)}emitAddItem(t){if(""===t.trim())return;const e=document.createElement("ix-select-item");e.value=t,e.label=t,this.addItemRef.appendChild(e),this.clearInput(),this.emitItemClick(t),this.addItem.emit(t)}selectValue(t){var e;this.items.forEach((e=>{e.selected=t.some((t=>t===e.value))})),this.value=this.selectedItems.map((t=>t.label)),this.inputValue=this.isSingleMode&&(null===(e=this.value)||void 0===e?void 0:e.length)?this.value[0]:null}componentWillLoad(){this.selectedIndices&&this.selectValue(Array.isArray(this.selectedIndices)?this.selectedIndices:[this.selectedIndices])}onLabelChange(t){t.preventDefault(),t.stopImmediatePropagation(),this.selectValue(Array.isArray(this.selectedIndices)?this.selectedIndices:[this.selectedIndices])}disconnectedCallback(){this.labelMutationObserver&&this.labelMutationObserver.disconnect()}itemExists(t){return this.items.find((e=>e.label===t))}dropdownVisibilityChanged(t){this.dropdownShow=t.detail,t.detail&&(this.inputRef.focus(),this.inputRef.select(),this.navigationItem=this.items[0],this.setHoverEffectForNavigatedSelectItem(),this.removeHiddenFromItems()),this.hasFocus=t.detail}async onKeyDown(t){this.dropdownShow&&("ArrowDown"!==t.code&&"ArrowUp"!==t.code||this.onArrowNavigation(t),"Enter"!==t.code&&"NumpadEnter"!==t.code||await this.onEnterNavigation(),"Escape"===t.code&&(this.dropdownShow=!1))}async onEnterNavigation(){var t,e;this.isMultipleMode||(this.editable&&!this.itemExists(this.inputFilterText)&&(this.emitAddItem(this.inputFilterText),this.navigationItem=this.items[this.items.length-1]),null===(t=this.navigationItem)||void 0===t||t.onItemClick(),await(null===(e=this.dropdownRef)||void 0===e?void 0:e.updatePosition()),this.isSingleMode&&!this.editable&&(this.dropdownShow=!1))}onArrowNavigation(t){t.stopPropagation(),t.preventDefault();const e=this.items.filter((t=>!t.classList.contains("d-none"))),i=e.indexOf(this.navigationItem);"ArrowDown"===t.code&&i<e.length-1?this.navigationItem=e[i+1]:"ArrowUp"===t.code&&i>0&&(this.navigationItem=e[i-1]),this.setHoverEffectForNavigatedSelectItem()}setHoverEffectForNavigatedSelectItem(){this.items.forEach((t=>{t.hover=t===this.navigationItem}))}filterItemsWithTypeahead(){this.inputFilterText=this.inputRef.value,this.inputFilterText?this.items.forEach((t=>{t.classList.remove("d-none"),t.label.toLowerCase().includes(this.inputFilterText.toLowerCase())||t.classList.add("d-none")})):this.removeHiddenFromItems(),this.isDropdownEmpty=this.items.every((t=>t.classList.contains("d-none")))}removeHiddenFromItems(){this.items.forEach((t=>{t.classList.remove("d-none")}))}clearInput(){this.inputRef.value="",this.inputFilterText=""}clear(){this.clearInput(),this.value=[],this.selectedIndices=[],this.itemSelectionChange.emit(null),this.dropdownShow=!1}render(){var t,e,c;return i(s,null,i("div",{class:{"form-control":!0,select:!0,focus:this.hasFocus,editable:this.editable,disabled:this.disabled,readonly:this.readonly},ref:t=>{this.dropdownAnchor=t,this.editable||(this.dropdownWrapperRef=t)}},i("div",{class:"input-container"},i("div",{class:"chips"},this.isMultipleMode?null===(t=this.selectedItems)||void 0===t?void 0:t.map((t=>i("ix-filter-chip",{disabled:this.disabled||this.readonly,onCloseClick:e=>{e.preventDefault(),e.stopPropagation(),this.emitItemClick(t.value)}},t.label))):"",i("div",{class:"trigger"},i("input",{"data-testid":"input",disabled:this.disabled,readOnly:this.readonly,type:"text",class:{"allow-clear":this.allowClear&&!!(null===(e=this.value)||void 0===e?void 0:e.length)},placeholder:this.editable?this.i18nPlaceholderEditable:this.i18nPlaceholder,value:this.inputValue,ref:t=>this.inputRef=t,onInput:()=>this.filterItemsWithTypeahead()}),this.isMultipleMode&&this.allowClear&&((null===(c=this.value)||void 0===c?void 0:c.length)||this.inputFilterText)?i("ix-icon-button",{class:"clear",icon:"clear",ghost:!0,oval:!0,size:"24",onClick:t=>{t.preventDefault(),t.stopPropagation(),this.clear()}}):null,this.disabled||this.readonly?null:i("div",{class:"chevron-down-container",ref:t=>{this.editable&&(this.dropdownWrapperRef=t)}},i("ix-icon",{class:"chevron",name:"chevron-down-small"})))))),i("ix-dropdown",{ref:t=>this.dropdownRef=t,show:this.dropdownShow,style:{width:"100%"},class:{"d-none":this.disabled||this.readonly||this.isDropdownEmpty&&!this.editable},anchor:this.dropdownAnchor,trigger:this.dropdownWrapperRef,onShowChanged:t=>this.dropdownVisibilityChanged(t),placement:"bottom-start",positioningStrategy:"absolute"},i("div",{class:"select-list-header",title:this.i18nSelectListHeader},this.i18nSelectListHeader),i("slot",null),i("div",{ref:t=>this.addItemRef=t,class:"d-contents"}),this.itemExists(this.inputFilterText)?"":i("ix-dropdown-item",{"data-testid":"add-item",icon:"plus",class:{"add-item":!0,"d-none":!(this.editable&&this.inputFilterText)},label:this.inputFilterText,onItemClick:t=>{t.preventDefault(),t.stopPropagation(),this.emitAddItem(this.inputFilterText)}})))}get hostElement(){return c(this)}static get watchers(){return{selectedIndices:["watchSelectedIndices"],inputFilterText:["watchInputText"]}}};l.style=".sc-ix-select-h{display:inline-block;position:relative;height:auto;width:100%}.sc-ix-select-h .select.sc-ix-select{position:relative;display:flex;align-items:center;height:auto;background-color:var(--theme-input--background);border:var(--theme-input--border-thickness) solid var(--theme-input--border-color);border-radius:var(--theme-input--border-radius);padding:0 0 0 0.5rem}.sc-ix-select-h .select.sc-ix-select:not(.disabled):not(:disabled){cursor:pointer}.sc-ix-select-h .select.sc-ix-select:not(.disabled):not(:disabled):hover{background-color:var(--theme-input--background--hover);border-color:var(--theme-input--border-color--hover)}.sc-ix-select-h .select.sc-ix-select:focus-within{background-color:var(--theme-input--background--focus);border-color:var(--theme-input--border-color--focus);outline:1px solid #119fff !important;outline-offset:var(--theme-input--focus--outline-offset)}.sc-ix-select-h .trigger.sc-ix-select{display:flex;align-items:center;flex-grow:1;height:100%}.sc-ix-select-h .input-container.sc-ix-select{display:flex;position:relative;align-items:flex-start;width:100%}.sc-ix-select-h .input-container.sc-ix-select .chips.sc-ix-select{position:relative;display:flex;align-items:center;flex-wrap:wrap;height:100%;max-height:3.5rem;flex-grow:1;overflow-y:auto}.sc-ix-select-h .input-container.sc-ix-select .chips.sc-ix-select>ix-filter-chip.sc-ix-select{margin:0 0.1rem}.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-font-smoothing:antialiased;-moz-osx-font-smooting:grayscale;font-family:Siemens Sans, sans-serif;font-size:0.875rem;font-weight:400;line-height:1.429em;color:var(--theme-color-std-text);background:transparent;height:1.75rem;width:100%}.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select,.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select:hover,.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select:focus-visible{border:none;outline:none}.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select::-moz-placeholder{color:var(--theme-input-select-icon--color)}.sc-ix-select-h .input-container.sc-ix-select input.sc-ix-select::placeholder{color:var(--theme-input-select-icon--color)}.sc-ix-select-h .input-container.sc-ix-select input.hide-placeholder.sc-ix-select::-moz-placeholder{opacity:0}.sc-ix-select-h .input-container.sc-ix-select input.hide-placeholder.sc-ix-select::placeholder{opacity:0}.sc-ix-select-h .chevron-down-container.sc-ix-select{display:flex;align-items:center;justify-content:center;width:2rem;min-width:2rem;height:100%}.sc-ix-select-h .editable.sc-ix-select .chevron-down-container.sc-ix-select:not(.disabled):not(:disabled){cursor:pointer}.sc-ix-select-h .editable.sc-ix-select .chevron-down-container.sc-ix-select:not(.disabled):not(:disabled):hover{background-color:var(--theme-btn-invisible-secondary--background--hover)}.sc-ix-select-h .editable.sc-ix-select .chevron-down-container.sc-ix-select:not(.disabled):not(:disabled){cursor:pointer}.sc-ix-select-h .editable.sc-ix-select .chevron-down-container.sc-ix-select:not(.disabled):not(:disabled):active{background-color:var(--theme-btn-invisible-secondary--background--active)}.sc-ix-select-h .add-item.sc-ix-select{display:flex;justify-content:flex-start;align-items:center;position:relative;width:100%}.sc-ix-select-h .select-list-header.sc-ix-select{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;align-items:center;height:2rem;color:var(--theme-select-list-item-hint--color);margin:0 0.5rem 0 2rem}";class h extends CustomEvent{constructor(t){super("ix-select-item:labelChange",{bubbles:!0,detail:t})}}const n=class{constructor(i){t(this,i),this.itemClick=e(this,"itemClick",7),this.label=void 0,this.value=void 0,this.selected=!1,this.hover=!1}async onItemClick(t){null==t||t.preventDefault(),null==t||t.stopPropagation(),this.itemClick.emit(this.value)}componentDidRender(){if(!this.value)throw Error("ix-select-item must have a `value` property")}labelChange(t,e){this.hostElement.dispatchEvent(new h({newValue:t,oldValue:e}))}render(){return i(s,null,i("ix-dropdown-item",{checked:this.selected,hover:this.hover,label:this.label?this.label:this.value,onItemClick:t=>this.onItemClick(t)}))}get hostElement(){return c(this)}static get watchers(){return{label:["labelChange"]}}};n.style=".sc-ix-select-item-h{display:block}.sc-ix-select-item-h ix-dropdown-item.sc-ix-select-item button.sc-ix-select-item{margin-left:1rem}";export{l as ix_select,n as ix_select_item}